{"remainingRequest":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue?vue&type=style&index=0&id=3ccf8124&lang=css","dependencies":[{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue","mtime":1610456235000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbnB1dCB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cgojdm90ZSB7CiAgbWFyZ2luOiAxZW07CiAgY29sb3I6cmViZWNjYXB1cnBsZQp9CgojbG9nb3V0IHsKICBtYXJnaW46IDJlbTsKICBjb2xvcjpyZWQKfQoKI3ZvdGVzIHsKICBtYXJnaW46IGF1dG87Cn0K"},{"version":3,"sources":["/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue"],"names":[],"mappings":";;AAgFA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACV;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACd","file":"/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"question\">\n    <h1>Which party would you like to vote for?</h1>\n   </div>\n  <div class=\"\">\n    <div v-if=\"voteAllowed\">\n      <div v-for=\"choice in choices\" :key=\"choice\">\n        <input type=\"radio\" :value=\"choice\" v-model=\"userChoice\" name=\"choice\">\n        <label :for=\"choice\">{{choice}}</label>\n      </div>\n      <button id=\"vote\" @click=\"vote\" :disabled=\"userChoice == null\">Vote!</button>\n    </div>\n    <div v-else>\n      <table id=\"votes\">\n        <tr v-for=\"choice in choices\" :key=\"choice\">\n          <td>{{choice}}</td>\n          <td>{{votes[choice]}}</td>\n        </tr>\n      </table>\n    </div>\n    <button id=\"logout\" @click=\"logout\">Logout</button>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\n\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      choices: [],\n      userChoice: null,\n      votes: {},\n      voteAllowed: true\n    }\n  },\n  mounted () {\n    api.choices()\n      .then(choices => {\n        this.choices = choices\n      })\n      .catch(() => {\n        this.$router.push('/login')\n      })\n    \n    api.allowed()\n    .then(response => {\n      if (response.message != 'Ok') {\n        this.voteAllowed = false\n        this.getVotes()\n      }\n    })\n  },\n  methods: {\n    vote () {\n      api.vote(this.userChoice)\n        .then(() => {\n          this.voteAllowed = false\n          this.getVotes()\n        })\n        .catch(() => {\n          this.$router.push('/login')\n        })\n    },\n    getVotes () {\n      api.votes()\n      .then(votes => {\n        this.votes = votes\n      })\n    },\n    logout () {\n      api.logout()\n      this.$router.push('/login')\n    }\n  },\n}\n</script>\n<style>\n\ninput {\n  text-align: center;\n}\n\n#vote {\n  margin: 1em;\n  color:rebeccapurple\n}\n\n#logout {\n  margin: 2em;\n  color:red\n}\n\n#votes {\n  margin: auto;\n}\n</style>"]}]}