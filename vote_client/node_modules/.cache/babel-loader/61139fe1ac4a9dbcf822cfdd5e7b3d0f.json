{"remainingRequest":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/babel-loader/lib/index.js!/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue","mtime":1610456235000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gracesmart/Desktop/voting-main/vote_client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFwaSBmcm9tICdAL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZScsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNob2ljZXM6IFtdLAogICAgICB1c2VyQ2hvaWNlOiBudWxsLAogICAgICB2b3Rlczoge30sCiAgICAgIHZvdGVBbGxvd2VkOiB0cnVlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgYXBpLmNob2ljZXMoKS50aGVuKGZ1bmN0aW9uIChjaG9pY2VzKSB7CiAgICAgIF90aGlzLmNob2ljZXMgPSBjaG9pY2VzOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfSk7CiAgICBhcGkuYWxsb3dlZCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlICE9ICdPaycpIHsKICAgICAgICBfdGhpcy52b3RlQWxsb3dlZCA9IGZhbHNlOwoKICAgICAgICBfdGhpcy5nZXRWb3RlcygpOwogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZvdGU6IGZ1bmN0aW9uIHZvdGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXBpLnZvdGUodGhpcy51c2VyQ2hvaWNlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIudm90ZUFsbG93ZWQgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLmdldFZvdGVzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0Vm90ZXM6IGZ1bmN0aW9uIGdldFZvdGVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGFwaS52b3RlcygpLnRoZW4oZnVuY3Rpb24gKHZvdGVzKSB7CiAgICAgICAgX3RoaXMzLnZvdGVzID0gdm90ZXM7CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBhcGkubG9nb3V0KCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/gracesmart/Desktop/voting-main/vote_client/src/views/Vote.vue"],"names":[],"mappings":"AAyBA,OAAO,GAAP,MAAgB,OAAhB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,IAFa,kBAEL;AACN,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,UAAU,EAAE,IAFP;AAGL,MAAA,KAAK,EAAE,EAHF;AAIL,MAAA,WAAW,EAAE;AAJR,KAAP;AAMD,GATY;AAUb,EAAA,OAVa,qBAUF;AAAA;;AACT,IAAA,GAAG,CAAC,OAAJ,GACG,IADH,CACQ,UAAA,OAAM,EAAK;AACf,MAAA,KAAI,CAAC,OAAL,GAAe,OAAf;AACD,KAHH,EAIG,KAJH,CAIS,YAAM;AACX,MAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,KANH;AAQA,IAAA,GAAG,CAAC,OAAJ,GACC,IADD,CACM,UAAA,QAAO,EAAK;AAChB,UAAI,QAAQ,CAAC,OAAT,IAAoB,IAAxB,EAA8B;AAC5B,QAAA,KAAI,CAAC,WAAL,GAAmB,KAAnB;;AACA,QAAA,KAAI,CAAC,QAAL;AACF;AACD,KAND;AAOD,GA1BY;AA2Bb,EAAA,OAAO,EAAE;AACP,IAAA,IADO,kBACC;AAAA;;AACN,MAAA,GAAG,CAAC,IAAJ,CAAS,KAAK,UAAd,EACG,IADH,CACQ,YAAM;AACV,QAAA,MAAI,CAAC,WAAL,GAAmB,KAAnB;;AACA,QAAA,MAAI,CAAC,QAAL;AACD,OAJH,EAKG,KALH,CAKS,YAAM;AACX,QAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,OAPH;AAQD,KAVM;AAWP,IAAA,QAXO,sBAWK;AAAA;;AACV,MAAA,GAAG,CAAC,KAAJ,GACC,IADD,CACM,UAAA,KAAI,EAAK;AACb,QAAA,MAAI,CAAC,KAAL,GAAa,KAAb;AACD,OAHD;AAID,KAhBM;AAiBP,IAAA,MAjBO,oBAiBG;AACR,MAAA,GAAG,CAAC,MAAJ;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACF;AApBO;AA3BI,CAAf","sourcesContent":["<template>\n  <div class=\"question\">\n    <h1>Which party would you like to vote for?</h1>\n   </div>\n  <div class=\"\">\n    <div v-if=\"voteAllowed\">\n      <div v-for=\"choice in choices\" :key=\"choice\">\n        <input type=\"radio\" :value=\"choice\" v-model=\"userChoice\" name=\"choice\">\n        <label :for=\"choice\">{{choice}}</label>\n      </div>\n      <button id=\"vote\" @click=\"vote\" :disabled=\"userChoice == null\">Vote!</button>\n    </div>\n    <div v-else>\n      <table id=\"votes\">\n        <tr v-for=\"choice in choices\" :key=\"choice\">\n          <td>{{choice}}</td>\n          <td>{{votes[choice]}}</td>\n        </tr>\n      </table>\n    </div>\n    <button id=\"logout\" @click=\"logout\">Logout</button>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\n\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      choices: [],\n      userChoice: null,\n      votes: {},\n      voteAllowed: true\n    }\n  },\n  mounted () {\n    api.choices()\n      .then(choices => {\n        this.choices = choices\n      })\n      .catch(() => {\n        this.$router.push('/login')\n      })\n    \n    api.allowed()\n    .then(response => {\n      if (response.message != 'Ok') {\n        this.voteAllowed = false\n        this.getVotes()\n      }\n    })\n  },\n  methods: {\n    vote () {\n      api.vote(this.userChoice)\n        .then(() => {\n          this.voteAllowed = false\n          this.getVotes()\n        })\n        .catch(() => {\n          this.$router.push('/login')\n        })\n    },\n    getVotes () {\n      api.votes()\n      .then(votes => {\n        this.votes = votes\n      })\n    },\n    logout () {\n      api.logout()\n      this.$router.push('/login')\n    }\n  },\n}\n</script>\n<style>\n\ninput {\n  text-align: center;\n}\n\n#vote {\n  margin: 1em;\n  color:rebeccapurple\n}\n\n#logout {\n  margin: 2em;\n  color:red\n}\n\n#votes {\n  margin: auto;\n}\n</style>"],"sourceRoot":""}]}